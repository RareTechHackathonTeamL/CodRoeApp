{% extends 'util/base.html' %} {% block title %}
<title>チャット一覧</title>
{% endblock title %} {% block content %}

<body class="body">
  <header class="header">
    <h1>ホーム</h1>

    <form action="/chat/create" method="get" class="chatcreation-button">
      <input type="image" src="{{ url_for('static', filename='img/chatcreation.png') }}" alt="チャット作成" class="header-image" />
    </form>
  </header>

  {% if error %}
  <div>
    <h3>{{ error }}</h3>
  </div>
  {% endif %} {% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
  <div>
    <h3>{{ message }}</h3>
  </div>
  {% endfor %} {% endif %} {% endwith %}

  <main>
    <div class="list list-margin-top chatcreatesubmit">
      {% for chat in chats %}
      <!-- 画像を押して遷移 -->
      <a href="/chat/{{ chat.id }}/messages" class="main-box">
        {% if chat.chat_type == 0 %}
        <img src="{{ url_for('static', filename='img/openform.png') }}" class="main-img" />
        {% elif chat.chat_type == 1 %}
        <img src="{{ url_for('static', filename='img/groupform.png') }}" class="main-img" />
        {% elif chat.chat_type == 2 %}
        <img src="{{ url_for('static', filename='img/privateform.png') }}" class="main-img" />
        {% endif %}
        <span>{{ chat.chat_name}}</span>
      </a>
      {% endfor %}
    </div>
  </main>

  <footer>
    <a href="/profile" method="GET" class="footer-button">
      <div class="footer-item">
        <img src="{{ url_for('static', filename='img/profile.png') }}" alt="プロフィール" class="footer-image" />
        プロフィール
      </div>
    </a>

    <div class="footer-button">
      <div class="footer-item">
        <img src="{{ url_for('static', filename='img/chat-list-create.png') }}" alt="ホーム" class="footer-image" />
        ホーム
      </div>
    </div>

    <a onclick="openModal()" class="footer-button">
      <div class="footer-item">
        <img src="{{ url_for('static', filename='img/logout-create.png') }}" alt="ログアウト" class="footer-image" />
        ログアウト
      </div>
    </a>
  </footer>

  <!-- ログアウトのJSテスト　ここから -->

  <!-- モーダル -->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img src="{{ url_for('static', filename='img/logout-create.png') }}" class="js-logout-img" alt="注意" />
      <div class="font">ログアウトしますか？</div>
      <!-- ログアウト用フォーム -->

      <form action="/logout">
        <input type="submit" class="js-btn delete" value="はい" />
      </form>

      <!-- キャンセルボタン -->
      <button class="js-btn cancel" onclick="closeModal()">キャンセル</button>
    </div>
  </div>

  <script>
    // モーダルを表示する関数
    function openModal() {
      // id="myModal" の要素を取得して display を "flex" に変更
      // これによりモーダルが画面に表示される
      document.getElementById("myModal").style.display = "flex";
    }

    // モーダルを非表示にする関数
    function closeModal() {
      // id="myModal" の要素を取得して display を "none" に変更
      // これによりモーダルが閉じられる
      document.getElementById("myModal").style.display = "none";
    }

    // 背景クリックで閉じる
    window.onclick = function (event) {
      const modal = document.getElementById("myModal");
      if (event.target === modal) {
        closeModal();
      }
    };
  </script>

  <!-- ログアウトのJSテスト　ここまで -->

  {% endblock content %}
</body>
