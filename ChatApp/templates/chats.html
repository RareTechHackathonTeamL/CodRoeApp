{% extends 'util/base.html' %} {% block title %}
<title>チャット一覧</title>
{% endblock title %} {% block content %}

<body class="body">
  <header class="header">
    <h1>チャット一覧</h1>

    <form action="/chat/create" method="get" class="chatcreation-button">
      <input
        type="image"
        src="{{ url_for('static', filename='img/chatcreation.png') }}"
        alt="チャット作成"
        class="header-image"
      />
    </form>
  </header>

  <main>
    <div class="list">
      {% for chat in chats %}
      <form action="/chat/{{ chat.id }}/messages" method="GET">
        <input type="submit" value="{{ chat.chat_name}}" class="h3-box" />
      </form>
      {% endfor %}
    </div>
  </main>

  <footer>
    <a href="/profile" method="GET" class="footer-button">
      <div class="footer-item">
        <img
          src="{{ url_for('static', filename='img/profile.png') }}"
          alt="プロフィール"
          class="footer-image"
        />
        プロフィール
      </div>
    </a>

    <div class="footer-button">
      <div class="footer-item">
        <img
          src="{{ url_for('static', filename='img/chat-list-create.png') }}"
          alt="チャット一覧"
          class="footer-image"
        />
        チャット一覧
      </div>
    </div>

    <a href="/logout" class="footer-button">
      <div class="footer-item">
        <img
          src="{{ url_for('static', filename='img/logout-create.png') }}"
          alt="ログアウト"
          class="footer-image"
        />
        ログアウト
      </div>
    </a>
  </footer>
  <!-- ログアウトのJSテスト　ここから -->
  <!-- 起動ボタン -->
  <button class="btn" onclick="openModal()">ログアウト</button>

  <!-- モーダル -->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <img src="js-logout.png" class="js-logout-img" alt="注意" />
      <div class="font">ログアウトしますか？</div>
      <!-- ログアウト用フォーム -->

      <form action="/logout">
        <input type="submit" class="js-btn delete" value="はい" />
      </form>

      <!-- キャンセルボタン -->
      <button class="js-btn cancel" onclick="closeModal()">キャンセル</button>
    </div>
  </div>

  <script>
    function openModal() {
      document.getElementById("myModal").style.display = "flex";
    }
    function closeModal() {
      document.getElementById("myModal").style.display = "none";
    }

    // 背景クリックで閉じる
    window.onclick = function (event) {
      const modal = document.getElementById("myModal");
      if (event.target === modal) {
        closeModal();
      }
    };
  </script>

  <!-- ログアウトのJSテスト　ここまで -->

  {% endblock content %}
</body>
