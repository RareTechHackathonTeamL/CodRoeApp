{% extends 'util/base.html' %} {% block title %}
<title>chatroom</title>
{% endblock title %}
{% block content %}
<div>Chat Room</div>
<div>{{ chat.chat_name }}</div>
<form action="/chats" method="GET">
    <input type="submit" value="チャット一覧へ">
</form>
{% if chat.user_id == user_id %}
<form action="/chat/{{ chat.id }}/detail" method="GET">
    <input type="submit" value="チャット編集へ">
</form>
{% endif %}
<form method="post">
    <input name="message" placeholder="メッセージを入力">
    <button type="submmit">送信</button>
</form>
<form method="POST">
    <ul>
        {% for stamp in stamps %}
        <li><input type="radio" id="{{ stamp.id }}" name="stamp" value="{{ stamp.id }}"><label for="{{ stamp.id }}"><img src="{{ url_for('static', filename=stamp.stamp_path) }}"></label></li>
        {% endfor %}
    </ul>
    <input type="submit" value="スタンプ送信">
</form>
<ul>
    {% for message in messages %}
    {% if message.message %}
    <li>{{ message.message }}
        {% if message.user_id == user_id %}
        <form action="/chat/{{ chat.id }}/messages/{{ message.id }}" method="POST">
            <input type="submit" value="削除">
        </form>
        {% endif %}
    </li>
    {% else %}
    <li><img src="{{ url_for('static', filename=message.stamp_path) }}">
        {% if message.user_id == user_id %}
        <form action="/chat/{{ chat.id }}/messages/{{ message.id }}" method="POST">
            <input type="submit" value="削除">
        </form>
        {% endif %}
    </li>
    {% endif %}
    {% endfor %}
</ul>
{% endblock content %}