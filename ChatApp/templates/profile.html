{% extends 'util/base.html' %} {% block title %}
<title>プロフィール</title>
{% endblock title %} {% block content %}
<!----- ヘッダー ----->

<header class="header">
  <h1>プロフィール</h1>
  <form action="/chats" method="GET" class="back-button">
    <input
      type="image"
      src="{{ url_for('static', filename='img/left.png') }}"
      alt="戻る"
      class="header-image"
    />
  </form>

  <!-- JavaScript？ -->
  <form
    action="/chat/delete/{{ chat.id }}"
    method="POST"
    class="deletebox-button"
  >
    <input
      type="image"
      src="{{ url_for('static', filename='img/delete.png') }}"
      alt="削除"
      class="header-image"
    />
  </form>
</header>
<!----- ヘッダー END ----->

{% with messages = get_flashed_messages() %} {% if messages %}
<ul>
  {% for message in messages %}
  <li>{{ message }}</li>
  {% endfor %}
</ul>
{% endif %} {% endwith %}

<!--  -->
<div>
  <p>カレンとユーザーID： <var>{{ current_user.user_id }}</var></p>
  <form action="/change_uname" method="GET">
    <input type="submit" value="変更" />
  </form>
</div>
<!--  -->

<!----- メインコンテンツ ----->
<main class="main">
  <div class="input-form">
    <form action="/register" method="POST">
      <div class="input-box-autu">
        <div class="font">ユーザー名</div>
        <var>{{ current_user.user_name }}</var>
        <div class="search-box">
          <input type="text" name="user_name" value="変更" class="text-box" />
        </div>
      </div>
    </form>

    <form action="/change_email" method="GET">
      <div class="input-box-autu">
        <div class="font">メールアドレス</div>
        <var>{{ current_user.email }}</var>
        <div class="search-box1">
          <input
            type="email"
            name="email"
            value="変更"
            placeholder="   xxxx@example.com"
            class="text-box"
          />
        </div>
      </div>
    </form>

    <form action="/change_password" method="GET">
      <div class="input-box-autu">
        <div class="font">パスワード</div>
        <div class="search-box2">
          <input type="password" name="password" value="" class="text-box" />
        </div>
      </div>
    </form>
  </div>
</main>

<!-- 検証中　ここから -->
<div>
  <h1>アイコン画像</h1>
  <img src="{{ icon_img }}" alt="アイコン画像" width="150" height="150" />
  <form action="/change_icon" method="GET">
    <input type="submit" value="変更" />
  </form>
</div>
<!-- 検証中　ここまで -->

<form action="/delete_user" method="GET">
  <input type="submit" value="ユーザ登録解除" />
</form>
<form action="/chats" method="GET">
  <input type="submit" value="戻る" />
</form>

<!-- ユーザー削除のJS関係　ここから -->
ここは吉田将貴がテストしております<br />

<!-- 起動ボタン -->
<button class="btn" onclick="openModal()">アカウント削除</button>

<!-- モーダル -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <img src="js-userdelet.png" class="js-userdele-img" alt="注意" />
    <div class="font">アカウントを削除しますか？</div>
    <!-- アカウント削除ボタン -->
    <form action="/delete_user" method="POST">
      <input type="submit" class="js-btn delete" value="はい" />
    </form>
    <!-- キャンセルボタン -->
    <button class="js-btn cancel" onclick="closeModal()">キャンセル</button>
  </div>
</div>

<script>
  function openModal() {
    document.getElementById("myModal").style.display = "flex";
  }
  function closeModal() {
    document.getElementById("myModal").style.display = "none";
  }

  // 背景クリックで閉じる
  window.onclick = function (event) {
    const modal = document.getElementById("myModal");
    if (event.target === modal) {
      closeModal();
    }
  };
</script>
<!-- ユーザー削除のJS関係　ここまで -->

{% endblock content %}
